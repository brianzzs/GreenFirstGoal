@model List<GreenFirstGoal.Models.FirstGoalBattleViewModel>

@{
    ViewData["Title"] = "Battle First GOal";
    var styleScore1 = "";
    var styleScore2 = "";
    var styleNoGoals = "brown";
    var firstPlayerName = "";
    var secondPlayerName = "";
    var player1WinsCount = 0;
    var player2WinsCount = 0;
    var drawsCount = 0;
}

@foreach (var item in Model)
{
    firstPlayerName = item.FirstGoalViewModel.FirstOrDefault().NameFirstPlayer;
    secondPlayerName = item.FirstGoalViewModel.FirstOrDefault().NameSecondPlayer;
    player1WinsCount = item.WinsViewModel.FirstOrDefault().AmountWinsPlayerA;
    player2WinsCount = item.WinsViewModel.FirstOrDefault().AmountWinsPlayerB;
    drawsCount = item.WinsViewModel.FirstOrDefault().AmountDraws;
}

<div class="pt-16 mt-2">
</div>
<section class="bg-gray-800 py-8">
    <div class="container mx-auto flex flex-wrap pt-4 pb-12">
        <h2 class="w-full my-4 text-5xl font-bold leading-tight text-center">
            @firstPlayerName vs @secondPlayerName
        </h2>
        <div class="container mx-auto flex flex-wrap justify-center pt-4 pb-12">
            <div class="w-1/4 p-6 rounded-lg bg-slate-600 shadow-md text-center text-white">
                <h2 class="text-lg font-medium">@firstPlayerName</h2>
                <p class="text-sm">@player1WinsCount</p>
            </div>
            <div class="w-1/4 p-6 rounded-lg bg-slate-600 shadow-md text-center text-white">
                <h2 class="text-lg font-medium">Empate</h2>
                <p class="text-sm">@drawsCount</p>
            </div>
            <div class="w-1/4 p-6 rounded-lg bg-slate-600 shadow-md text-center text-white">
                <h2 class="text-lg font-medium">@secondPlayerName</h2>
                <p class="text-sm">@player2WinsCount</p>
            </div>
        </div>
        <div class="w-full mb-24">
            <div class="h-1 mx-auto gradient w-64 opacity-25 my-0 py-0 rounded-t"></div>
        </div>
        <div class="w-full md:w-1/3 p-6 flex flex-col flex-grow flex-shrink">
            <div class="flex-1 rounded-t rounded-b-none overflow-hidden shadow">
                <div class="text-gray-600 text-center">
                    <h3 class="py-4 text-4xl text-gray-50">Primeiro Gol</h3>
                </div>
                <div class="grid grid-cols-4 border border-gray-500 rounded-lg p-2">
                    <div class="overflow-auto rounded-l-lg">
                        <table class="table-fixed w-full text-center">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="h-12"></th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200">
                                <tr class="bg-gray-900">
                                    <td class="p-2 h-16">Últimas 5</td>
                                </tr>
                                <tr class="bg-gray-700">
                                    <td class="p-2 h-16">Últimas 10</td>
                                </tr>
                                <tr class="bg-gray-900">
                                    <td class="p-2 h-16">Últimas 15</td>
                                </tr>
                                <tr class="bg-gray-700">
                                    <td class="p-2 h-16">Últimas 20</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-span-3 overflow-auto rounded-r-lg">
                        <table class="table-fixed w-full text-center">
                            <thead class="bg-gray-700 text-gray-400">
                                <tr>
                                    <th class="p-2 pt-4">@firstPlayerName</th>
                                    <th class="p-2 pt-4">@secondPlayerName</th>
                                    <th class="p-2 pt-4">Ninguém</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200 text-xl">
                                @foreach (var item in Model)
                                {
                                    @foreach (var goals in item.FirstGoalViewModel)
                                    {
                                        if (goals.FirstGoalAmountSecondPlayer < goals.FirstGoalAmountFirstPlayer)
                                        {
                                            styleScore1 = "color:green !important";
                                            styleScore2 = "color:red !important";
                                            styleNoGoals = "color:gray !important;";
                                        }
                                        else if (goals.FirstGoalAmountSecondPlayer > goals.FirstGoalAmountFirstPlayer)
                                        {
                                            styleScore1 = "color:red !important";
                                            styleScore2 = "color:green !important";
                                            styleNoGoals = "color:gray !important;";
                                        }
                                        else
                                        {
                                            styleScore1 = "color:gray !important";
                                            styleScore2 = "color:gray !important";
                                            styleNoGoals = "color:brown !important;";
                                        }
                                        var noGoals = goals.NoGoals;
                                        var player1 = @goals.FirstGoalAmountFirstPlayer;
                                        var player2 = @goals.FirstGoalAmountSecondPlayer;
                                        var total = player1 + player2 + noGoals;
                                        <tr class="bg-gray-900">
                                            <td class="p-2 h-16" style="@styleScore1">@Html.DisplayFor(model => goals.FirstGoalAmountFirstPlayer)</td>
                                            <td class="p-2 h-16" style="@styleScore2">@Html.DisplayFor(model => goals.FirstGoalAmountSecondPlayer)</td>
                                            <td class="p-2 h-16">@Html.DisplayFor(model => goals.NoGoals)</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="w-full md:w-1/3 p-6 flex flex-col flex-grow flex-shrink">
            <div class="flex-1 rounded-t rounded-b-none overflow-hidden shadow">
                <div class="text-gray-600 text-center">
                    <h3 class="py-4 text-4xl text-gray-50">Média de Gols</h3>
                </div>
                <div class="grid grid-cols-4 border border-gray-500 rounded-lg p-2">
                    <div class="overflow-auto rounded-l-lg">
                        <table class="table-fixed w-full text-center">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="h-12"></th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200">
                                <tr class="bg-gray-900">
                                    <td class="p-2 h-16">Últimas 5</td>
                                </tr>
                                <tr class="bg-gray-700">
                                    <td class="p-2 h-16">Últimas 10</td>
                                </tr>
                                <tr class="bg-gray-900">
                                    <td class="p-2 h-16">Últimas 15</td>
                                </tr>
                                <tr class="bg-gray-700">
                                    <td class="p-2 h-16">Últimas 20</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-span-3 overflow-auto rounded-r-lg">
                        <table class="table-fixed w-full text-center">
                            <thead class="bg-gray-700 text-gray-400">
                                <tr>
                                    @*<th></th>*@
                                    <th class="p-2 pt-4">@firstPlayerName</th>
                                    <th class="p-2 pt-4">@secondPlayerName</th>
                                    <th class="p-2 pt-4">Total</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200">
                                @foreach (var item in Model)
                                {
                                    @foreach (var totals in item.TotalGoalsViewModel)
                                    {
                                        <tr class="bg-gray-900">
                                            @*<td class="p-2 text-center"></td>*@
                                            <td class="p-2 h-16">@totals.FirstPlayerGoalsAmount</td>
                                            <td class="p-2 h-16">@totals.SecondPlayerGoalsAmount</td>
                                            <td class="p-2 h-16">@totals.MatchTotalGoals</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container mx-auto flex flex-wrap pt-4 pb-12">
        <div class="w-full md:w-1/3 p-6 flex flex-col flex-grow flex-shrink">
            <div class="flex-1 rounded-t rounded-b-none overflow-hidden shadow ">
                <div class="text-gray-600 text-center">
                    <h3 class="py-4 text-4xl text-gray-50">Histórico de Partidas</h3>
                </div>
                <div class="border border-gray-500 rounded-lg p-2 lg:block hidden ">
                    <div class="max-h-96 overflow-auto rounded-lg">
                        <table class="table-fixed w-full text-center overflow-auto ">
                            <thead class="bg-gray-700 text-gray-400">
                                <tr>
                                    <th class="p-2 pt-4">Data</th>
                                    <th class="p-2 pt-4">Player A</th>
                                    <th class="p-2 pt-4">Team A</th>
                                    <th class="p-2 pt-4">Score A</th>
                                    <th class="p-2 pt-4">Score B</th>
                                    <th class="p-2 pt-4">Team B</th>
                                    <th class="p-2 pt-4">PlayerB</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200">
                                @foreach (var item in Model)
                                {
                                    foreach (var history in item.HistoryViewModel)
                                    {
                                        <tr class="bg-gray-900">
                                            <td class="p-2">@history.GameDate</td>
                                            <td class="p-2">@history.PlayerA</td>
                                            <td class="p-2">@history.TeamA</td>
                                            <td class="p-2">@history.ScoreA</td>
                                            <td class="p-2">@history.ScoreB</td>
                                            <td class="p-2">@history.TeamB</td>
                                            <td class="p-2">@history.PlayerB</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="border border-gray-500 rounded-lg p-2 lg:hidden">
                    <div class="max-h-96 overflow-auto rounded-lg">
                        <table class="table-fixed w-full text-center overflow-auto ">
                            <thead class="bg-gray-700 text-gray-400">
                                <tr>
                                    <th class="p-2 pt-4">Data</th>
                                    <th class="p-2 pt-4">Player1</th>
                                    <th class="p-2 pt-4">Resultado</th>
                                    <th class="p-2 pt-4">Player2</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200">
                                @foreach (var item in Model)
                                {
                                    foreach (var history in item.HistoryViewModel)
                                    {
                                        <tr class="bg-gray-900">
                                            <td class="p-2">@history.GameDate</td>
                                            <td class="p-2">@history.PlayerA</td>
                                            <td class="p-2">Score</td> @*Adicionar o historico  com os gols do PlayerA e do Player B nessa unica TD*@
                                            <td class="p-2">@history.PlayerB</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
