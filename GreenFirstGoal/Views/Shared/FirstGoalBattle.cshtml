@model List<GreenFirstGoal.Models.FirstGoalBattleViewModel>

@{
    ViewData["Title"] = "Battle First GOal";
    var styleScore1 = "";
    var styleScore2 = "";
    var styleNoGoals = "brown";
    var firstPlayerName = "";
    var secondPlayerName = "";
}

@foreach (var item in Model)
{
    firstPlayerName = item.FirstGoalViewModel.FirstOrDefault().NameFirstPlayer;
    secondPlayerName = item.FirstGoalViewModel.FirstOrDefault().NameSecondPlayer;
}

<div class="pt-16 mt-2">
</div>
<section class="bg-gray-800 py-8">
    <div class="container mx-auto flex flex-wrap pt-4 pb-12">
        <h2 class="w-full my-4 text-5xl font-bold leading-tight text-center">
            @firstPlayerName vs @secondPlayerName
        </h2>
        <div class="w-full mb-24">
            <div class="h-1 mx-auto gradient w-64 opacity-25 my-0 py-0 rounded-t"></div>
        </div>
        <div class="w-full md:w-1/3 p-6 flex flex-col flex-grow flex-shrink">
            <div class="flex-1 rounded-t rounded-b-none overflow-hidden shadow">
                <div class="text-gray-600 text-center">
                    <h3 class="py-4 text-4xl text-gray-50">Primeiro Gol</h3>
                </div>
                <div class="grid grid-cols-4 border border-gray-500 rounded-lg p-2">
                    <div class="overflow-auto rounded-l-lg">
                        <table class="table-fixed w-full text-center">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="h-12"></th> 
                                </tr>
                            </thead>
                            <tbody class="text-gray-200">
                                <tr class="bg-gray-900">
                                  <td class="p-2 h-16">Últimas 5</td>
                                </tr>
                                <tr class="bg-gray-700">
                                  <td class="p-2 h-16">Últimas 10</td>
                                </tr>
                                <tr class="bg-gray-900">
                                  <td class="p-2 h-16">Últimas 15</td>
                                </tr>
                                <tr class="bg-gray-700">
                                  <td class="p-2 h-16">Últimas 20</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-span-3 overflow-auto rounded-r-lg">
                        <table class="table-fixed w-full text-center">
                            <thead class="bg-gray-700 text-gray-400">
                                <tr>
                                    <th class="p-2 pt-4">@firstPlayerName</th>
                                    <th class="p-2 pt-4">@secondPlayerName</th>
                                    <th class="p-2 pt-4">Ninguém</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-200 text-xl">
                                @foreach (var item in Model)
                                {
                                    @foreach (var goals in item.FirstGoalViewModel)
                                    {
                                        if (goals.FirstGoalAmountSecondPlayer < goals.FirstGoalAmountFirstPlayer)
                                        {
                                            styleScore1 = "color:green !important";
                                            styleScore2 = "color:red !important";
                                            styleNoGoals = "color:black !important;";
                                        }
                                        else if (goals.FirstGoalAmountSecondPlayer > goals.FirstGoalAmountFirstPlayer)
                                        {
                                            styleScore1 = "color:red !important";
                                            styleScore2 = "color:green !important";
                                            styleNoGoals = "color:black !important;";
                                        }
                                        else
                                        {
                                            styleScore1 = "color:black !important";
                                            styleScore2 = "color:black !important";
                                            styleNoGoals = "color:brown !important;";
                                        }
                                        var noGoals = goals.NoGoals;
                                        var player1 = @goals.FirstGoalAmountFirstPlayer;
                                        var player2 = @goals.FirstGoalAmountSecondPlayer;
                                        var total = player1 + player2 + noGoals;
                                        <tr class="bg-gray-900">
                                            <td class="p-2 h-16" style="@styleScore1">@Html.DisplayFor(model => goals.FirstGoalAmountFirstPlayer)</td>
                                            <td class="p-2 h-16" style="@styleScore2">@Html.DisplayFor(model => goals.FirstGoalAmountSecondPlayer)</td>
                                            <td class="p-2 h-16">@Html.DisplayFor(model => goals.NoGoals)</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="w-full md:w-1/3 p-6 flex flex-col flex-grow flex-shrink">
            <div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow">
                <div class="text-gray-600 text-left bg-gray-100">
                    <h3 class="ml-28 py-4 text-xl text-cyan-900 text-center">Média de Gols</h3>
                </div>
                <table class="table-fixed w-full text-gray-600 text-center table-striped">
                    <thead>
                        <tr>
                            @*<th></th>*@
                            <th class="p-2 pb-4 text-center">@firstPlayerName</th>
                            <th class="p-2 pb-4 text-center">@secondPlayerName</th>
                            <th class="p-2 pb-4 text-center">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            @foreach (var totals in item.TotalGoalsViewModel)
                            {
                                <tr>
                                    @*<td class="p-2 text-center"></td>*@
                                    <td class="p-2 text-center">@totals.FirstPlayerGoalsAmount</td>
                                    <td class="p-2 text-center">@totals.SecondPlayerGoalsAmount</td>
                                    <td class="p-2 text-center">@totals.MatchTotalGoals</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="container mx-auto flex flex-wrap pt-4 pb-12">
        <div class="w-full md:w-1/3 p-6 flex flex-col flex-grow flex-shrink">
            <div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow">
                <div class="text-gray-600 text-left bg-gray-100">
                    <h3 class="ml-28 py-4 text-xl text-cyan-900 text-center">Histórico de Partidas</h3>
                </div>
                <table class="table-fixed w-full text-gray-600 text-center table-striped">
                    <thead>
                        <tr>
                            <th class="p-2 text-center">Data</th>
                            <th class="p-2 text-center">Player A</th>
                            <th class="p-2 text-center">Team A</th>
                            <th class="p-2 text-center">Score A</th>
                            <th class="p-2 text-center">Score B</th>
                            <th class="p-2 text-center">Team B</th>
                            <th class="p-2 text-center">Player B</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            foreach (var history in item.HistoryViewModel)
                            {
                                <tr>
                                    <td class="p-2 text-center">@history.GameDate</td>
                                    <td class="p-2 text-center">@history.PlayerA</td>
                                    <td class="p-2 text-center">@history.TeamA</td>
                                    <td class="p-2 text-center">@history.ScoreA</td>
                                    <td class="p-2 text-center">@history.ScoreB</td>
                                    <td class="p-2 text-center">@history.TeamB</td>
                                    <td class="p-2 text-center">@history.PlayerB</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
